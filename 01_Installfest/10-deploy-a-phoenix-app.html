<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="google-site-verification" content="R6ba5MLXyH1nPWUW2FaRbcaaqid5fFEUiymqWpcGEFc" />

  <title>Deploy a Phoenix App</title>
  <meta name="description" content="We empower people with technology through teaching and facilitating access, enlarging the community of people who give back and teach others.
">
  
  <meta name="author" content="ElixirBridge">
  <meta name="copyright" content="&copy; ElixirBridge 2019">
  

  <!-- External libraries -->
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/styles/monokai_sublime.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightbox2/2.7.1/css/lightbox.css">

  <!-- Favicon and other icons (made with http://www.favicon-generator.org/) -->
  <link rel="shortcut icon" href="/elixir-bridge.github.io/assets/icons/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/elixir-bridge.github.io/assets/icons/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" sizes="57x57" href="/elixir-bridge.github.io/assets/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/elixir-bridge.github.io/assets/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/elixir-bridge.github.io/assets/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/elixir-bridge.github.io/assets/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/elixir-bridge.github.io/assets/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/elixir-bridge.github.io/assets/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/elixir-bridge.github.io/assets/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/elixir-bridge.github.io/assets/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/elixir-bridge.github.io/assets/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="/elixir-bridge.github.io/assets/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/elixir-bridge.github.io/assets/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/elixir-bridge.github.io/assets/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/elixir-bridge.github.io/assets/icons/favicon-16x16.png">
  <link rel="manifest" href="/elixir-bridge.github.io/assets/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/elixir-bridge.github.io/assets/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">

  
  <!-- Facebook OGP cards -->
  <meta property="og:description" content="We empower people with technology through teaching and facilitating access, enlarging the community of people who give back and teach others.
" />
  <meta property="og:url" content="" />
  <meta property="og:site_name" content="ElixirBridge for Girls" />
  <meta property="og:title" content="Deploy a Phoenix App" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="/elixir-bridge.github.io/assets/logo.png" />
  <meta property="og:image:type" content="image/png" />
  <meta property="og:image:width" content="612" />
  <meta property="og:image:height" content="605" />
  

  
  <!-- Twitter: card tags -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Deploy a Phoenix App">
  <meta name="twitter:description" content="We empower people with technology through teaching and facilitating access, enlarging the community of people who give back and teach others.
">
  <meta name="twitter:image" content="/elixir-bridge.github.io/assets/logo.png">
  <meta name="twitter:url" content="">
  

  

  <!-- Site styles -->
  <link rel="stylesheet" href="/elixir-bridge.github.io/css/main.css">
  <link rel="canonical" href="/elixir-bridge.github.io/01_Installfest/10-deploy-a-phoenix-app.html">
  <link rel="alternate" type="application/rss+xml" title="ElixirBridge for Girls" href="/elixir-bridge.github.io/feed.xml" />
</head>


  <body>

    <header class="navigation" role="banner">
  <div class="navigation-wrapper">
    <a href="/elixir-bridge.github.io/" class="logo">
      
      <img src="/elixir-bridge.github.io/assets/logo.png" alt="ElixirBridge for Girls">
      
    </a>
    <a href="javascript:void(0)" class="navigation-menu-button" id="js-mobile-menu">
      <i class="fa fa-bars"></i>
    </a>
  </div>
</header>


    <div class="page-wrapper">
      <div class="sidebar">
  <!-- get the sections -->




<!-- make them an array -->



<h4>
  
    <a href="/docs">Docs</a>
  
</h4>


<!-- spit them out as a list of lists -->

  

  
    <h4>Installfest</h4>
    <ul class="sidebar-list">
    
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/01_Installfest/01-begin-installfest.html'>Installfest</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/01_Installfest/02-choose-your-own-operating-system.html'>Choose your own operating system</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/01_Installfest/03-macintosh-osx-setup.html'>Mac OSX setup</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/01_Installfest/03-windows-setup.html'>Windows setup</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/01_Installfest/04-install-and-configure-git.html'>Install and Configure git</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/01_Installfest/05-install-elixir-and-phoenix.html'>Install Elixir and Phoenix</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/01_Installfest/06-create-an-ssh-key.html'>Create an SSH Key</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/01_Installfest/07-create-a-heroku-account.html'>Create a Heroku Account</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/01_Installfest/08-create-phoenix-app.html'>Create a Phoenix App</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/01_Installfest/09-generate-a-database-model.html'>Generate a Database Model</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/01_Installfest/10-deploy-a-phoenix-app.html'>Deploy a Phoenix App</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/01_Installfest/11-deploy-to-heroku.html'>Deploy to Heroku</a></li>
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    </ul>
  

  
    <h4>Intro to Elixir</h4>
    <ul class="sidebar-list">
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/02_Intro_to_Elixir/01-why-program-why-elixir.html'>Why program? Why elixir?</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/02_Intro_to_Elixir/03-learning-elixir.html'>Learning Elixir</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/02_Intro_to_Elixir/04-elixir-types.html'>Elixir Types</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/02_Intro_to_Elixir/05-operators-and-variables.html'>Operators and Variables</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/02_Intro_to_Elixir/05.5-anonymous-functions-lists-and-tuples.html'>Lists and Tuples</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/02_Intro_to_Elixir/05.6-keyword-lists.html'>Keyword Lists</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/02_Intro_to_Elixir/05.7-maps-and-nested-data-structures.html'>Maps and Nested Data Structures</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/02_Intro_to_Elixir/05.9-enumerables.html'>Enumerables</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/02_Intro_to_Elixir/06-pattern-matching.html'>Pattern Matching</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/02_Intro_to_Elixir/06.4-modules.html'>Modules</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/02_Intro_to_Elixir/06.5_Functions.html'>Functions</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/02_Intro_to_Elixir/08-keyword-lists.html'>Keyword Lists</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/02_Intro_to_Elixir/09-maps-and-nested-data-structures.html'>Maps and Nested Data Structures</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/02_Intro_to_Elixir/12-recursion.html'>Recursion</a></li>
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    </ul>
  

  
    <h4>Intro to Phoenix</h4>
    <ul class="sidebar-list">
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/03_Intro_to_Phoenix/01-creating-a-chat-app.html'>Creating a Chat App</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/03_Intro_to_Phoenix/02-add-a-perisistence-layer.html'>Adding a Persistence layer</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/03_Intro_to_Phoenix/13-create-a-phoenix-app.html'>Create a Phoenix App</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/03_Intro_to_Phoenix/14-running-the-application-locally.html'>Running the Application Locally</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/03_Intro_to_Phoenix/15-creating-a-migration.html'>Creating a Migration</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/03_Intro_to_Phoenix/16-phoenix-architecture.html'>Phoenix architecture</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/03_Intro_to_Phoenix/17-CRUD-with-scaffolding.html'>CRUD with scaffolding</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/03_Intro_to_Phoenix/18-setting-the-default-page.html'>Setting the Default Page</a></li>
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    </ul>
  

  
    <h4>Mix Applications</h4>
    <ul class="sidebar-list">
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/04_Mix_Applications/01-mix.html'>Mix</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/04_Mix_Applications/02-adding-dependencies.html'>Adding dependencies</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/04_Mix_Applications/03-testing.html'>Testing</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/04_Mix_Applications/04-set-up-my-app.html'>Our first application</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/04_Mix_Applications/05-interacting-with-iex.html'>Interacting with iex</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/04_Mix_Applications/06-environments.html'>Environments</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/04_Mix_Applications/07-documentation.html'>Documentation</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/04_Mix_Applications/12-supervisors.html'>Supervisors</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/04_Mix_Applications/13-router.html'>Router</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/04_Mix_Applications/14-plugs.html'>Plugs</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/04_Mix_Applications/15-plug-router.html'>Plug.Router</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/04_Mix_Applications/16-templating.html'>Templating</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/04_Mix_Applications/16.5-genserver.html'>GenServer</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/04_Mix_Applications/17-deployment.html'>Deployment</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/04_Mix_Applications/18-dockerfile.html'>Docker and the Dockerfile</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/04_Mix_Applications/19-distillery-config.html'>Distillery</a></li>
      
    
      
        <li class="sidebar-list-item"><a href='/elixir-bridge.github.io/04_Mix_Applications/20-running-docker.html'>Running docker</a></li>
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    </ul>
  


</div>

      <div class="page-content">
          <div class="wrapper">
<div class="page">

  <header class="post-header">
    <h1 class="post-title">Deploy a Phoenix App</h1>
  </header>

  <article class="post-content">
    <h4 id="deploy-a-phoenix-app">Deploy A Phoenix App</h4>

<p>If your prompt doesn’t already show that you are (still) in the test_app folder</p>

<p>Type this in the terminal:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd test_app
</code></pre></div></div>

<p>Type this in the terminal:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git init

</code></pre></div></div>

<p>Expected result:</p>

<p>Initialized empty Git repository in c:/Sites/elixirbridge/test_app/.git/</p>

<p>Type this in the terminal:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git add -A
</code></pre></div></div>

<p>With Git, there are usually many ways to do very similar things.</p>

<ul>
  <li>git add foo.txt adds a file named foo.txt</li>
  <li>git add . (“git add dot”) adds all new files and changed files, but keeps files that you’ve deleted</li>
  <li>git add -A adds everything, including deletions</li>
</ul>

<p>“Adding deletions” may sound weird, but if you think of a version control system as keeping track of changes, it might make more sense.</p>

<p>Type this in the terminal:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git commit -m "initial commit"
</code></pre></div></div>

<p>Expected result:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>a lot of lines like create mode 100644
</code></pre></div></div>

<p>Type this into the terminal:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git log
</code></pre></div></div>

<p>Expected Result:</p>

<p>(Your git name and “initial commit” message.)</p>

<h5 id="step-2-deploy-your-app-to-heroku">Step 2: Deploy your app to Heroku</h5>

<h5 id="step-21-create-a-heroku-application-from-this-local-phoenix-application">Step 2.1 Create a Heroku application from this local Phoenix Application</h5>

<p>The very first time you use heroku you must enter your Heroku email address and password. Your password may not be shown as you type it, but don’t worry, it’s being entered! If you have already provided your credentials before, you won’t be prompted for them again.</p>

<p>Type this into the terminal:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>heroku create --buildpack "https://github.com/HashNuke/heroku-buildpack-elixir.git"
</code></pre></div></div>

<p>Expected Result:
 Something similar to the following -</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Creating app... done, ⬢ stormy-stream-65433
Setting buildpack to https://github.com/HashNuke/heroku-buildpack-elixir.git... done
https://stormy-stream-65433.herokuapp.com/ | https://git.heroku.com/stormy-stream-65433.git
</code></pre></div></div>

<p>Copy and paste the name of your app somewhere, you will need it for a later step. The the name of our app is listed in the terminal right under the line <code class="highlighter-rouge">Creating app... done,</code></p>

<p>In this case..the name of the app is <code class="highlighter-rouge">stormy-stream-65433</code></p>

<p>–buildpack option we are passing allows us to specify the Elixir buildpack we want Heroku to use.</p>

<p>A buildpack is a convenient way of packaging framework and/or runtime support. In our case it’s installing Erlang, Elixir, fetching our application dependencies, and so on, before we run it.</p>

<p>Now Type this into the terminal:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>heroku buildpacks:add https://github.com/gjaldon/heroku-buildpack-phoenix-static.git
</code></pre></div></div>

<p>Expected output:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Buildpack added. Next release on stormy-stream-65433 will use:
  1. https://github.com/HashNuke/heroku-buildpack-elixir.git
  2. https://github.com/gjaldon/heroku-buildpack-phoenix-static.git
Run git push heroku master to create a new release using these buildpacks.
</code></pre></div></div>
<p>This buildpack allows us to compile static assets for Phoenix deployment.</p>

<h5 id="setting-enviroment-variables">Setting Enviroment Variables</h5>

<p>Every new project comes with a config file, <code class="highlighter-rouge">config/prod.secret.exs</code> which stores configuration that should not be committed with source code.</p>

<p>Phoenix adds it to the .gitingnore file by default.</p>

<p>The Problem is Heroku uses environment variables to pass sensitive information to our application.</p>

<h5 id="setup-config-files-for-deploy">Setup config files for Deploy</h5>

<p>Open <code class="highlighter-rouge">config/prod.exs</code></p>

<p>Delete the contents of that file.</p>

<p>Then paste in the following:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>use Mix.Config

config :test_app, TestAppWeb.Endpoint,
  http: [port: {:system, "PORT"}],
  url: [host: "example.com", port: 80],
  force_ssl: [rewrite_on: [:x_forwarded_proto]],
  cache_static_manifest: "priv/static/manifest.json",
  secret_key_base: Map.fetch!(System.get_env(), "SECRET_KEY_BASE")

# Do not print debug messages in production
config :logger, level: :info


# Configure your database
config :test_app, TestApp.Repo,
  adapter: Ecto.Adapters.Postgres,
  hostname: System.get_env("NEW_DATABASE_URL"),
  pool_size: String.to_integer(System.get_env("POOL_SIZE") || "10"),
  ssl: true,
  database: System.get_env("DATABASE"),
  username: System.get_env("USERNAME"),
  password: System.get_env("PASSWORD")
</code></pre></div></div>

<p>Next Find the line in the <code class="highlighter-rouge">prod.exs</code> file that says the following</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>url: [host: "example.com", port: 80]
</code></pre></div></div>
<p>(It should be in the first section of this file we changed).</p>

<p>Replace that line with the following lines</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>url: [scheme: "https", host: "name-of-your-app.herokuapp.com", port: 443],
</code></pre></div></div>

<p>Make sure that you replace the part of the host url that says <code class="highlighter-rouge">name-of-your-app</code> with the app name that you copied and saved from an earlier step.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>use Mix.Config

config :test_app, TestAppWeb.Endpoint,
  http: [port: {:system, "PORT"}],
  url: [scheme: "https", host: "stormy-stream-65433.herokuapp.com", port: 443],
  force_ssl: [rewrite_on: [:x_forwarded_proto]],
  cache_static_manifest: "priv/static/manifest.json",
  secret_key_base: Map.fetch!(System.get_env(), "SECRET_KEY_BASE")

# Do not print debug messages in production
config :logger, level: :info


# Configure your database
config :test_app, TestApp.Repo,
  adapter: Ecto.Adapters.Postgres,
  hostname: System.get_env("NEW_DATABASE_URL"),
  pool_size: String.to_integer(System.get_env("POOL_SIZE") || "10"),
  ssl: true,
  database: System.get_env("DATABASE"),
  username: System.get_env("USERNAME"),
  password: System.get_env("PASSWORD")
</code></pre></div></div>

<p>The last thing we need to do is decrease the timeout for websocket Transport.</p>

<p>Open <code class="highlighter-rouge">lib/test_app_web/channels/user_socket.ex</code></p>

<p>Under ‘##Transports`</p>

<p>replace the following line</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>transport :websocket, Phoenix.Transports.WebSocket
</code></pre></div></div>
<p>with</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> transport :websocket, Phoenix.Transports.WebSocket, timeout: 45_000
</code></pre></div></div>

<p>This ensures that any idle connections are closed by Phoenix before they reach Heroku’s 55 second timeout window.</p>

<h4 id="create-procfile">Create Procfile</h4>

<p>In your terminal make sure you are in your test_app directory.</p>

<p>Then type:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>touch Procfile

</code></pre></div></div>

<p>Open the Procfile in your text editor and paste in the following:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>web: elixir -S mix phx.server
</code></pre></div></div>

<p>Next type the following into your terminal (do one line at a time)</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>heroku addons:create heroku-postgresql:hobby-dev
</code></pre></div></div>

<p>next type the following in your terminal:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>heroku config:set MIX_ENV=prod
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>heroku config:set POOL_SIZE=18
</code></pre></div></div>
<p>Expected Result:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Setting POOL_SIZE and restarting ⬢ stormy-stream-65433... done, v7
POOL_SIZE: 18
</code></pre></div></div>

<h5 id="create-secret_key_base-config-based-on-random-string">Create SECRET_KEY_BASE config based on Random string.</h5>

<p>Type the following into your terminal:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mix phx.gen.secret
</code></pre></div></div>
<p>Expected Result:
Something like below, but your string will be different so don’t expect the output to be the same.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sadshfsldfhdfskdfhasjdhf121223jfjksasdfs
</code></pre></div></div>

<p>Copy the string that is in your terminal.</p>

<p>Now we need to set it in heroku</p>

<p>Type this into your terminal:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>heroku config:set SECRET_KEY_BASE="your-secret-key-string-from-the-last-step"
</code></pre></div></div>
<p>Expected Result:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Setting SECRET_KEY_BASE and restarting ⬢ stormy-stream-65433... done, v8
SECRET_KEY_BASE: your-secret-key
</code></pre></div></div>

<p>If you need to make any of your config variables available at compile time, you will need to explicitly define which ones in a configuration file.
Create a file elixir_buildpack.config in your application’s root directory and add a line like: config_vars_to_export=(MY_VAR) <a href="https://github.com/HashNuke/heroku-buildpack-elixir#specifying-config-vars-to-export-at-compile-time">See more</a></p>

<p>Next open up your <code class="highlighter-rouge">prod.exs</code> file</p>

<p>There should be a section towards the bottom of the file that looks like this</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Configure your database
config :test_app, TestApp.Repo,
  adapter: Ecto.Adapters.Postgres,
  hostname: System.get_env("NEW_DATABASE_URL"),
  pool_size: String.to_integer(System.get_env("POOL_SIZE") || "10"),
  ssl: true,
  database: System.get_env("DATABASE"),
  username: System.get_env("USERNAME"),
  password: System.get_env("PASSWORD")
</code></pre></div></div>

<p>make sure that the name after ‘config’ is the name of your app,</p>

<p>it should look like this</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>config :test_app, TestApp.repo
</code></pre></div></div>

  </article>
  
  
  
  
    <h4>Next step: </h4>
    <p>Go on to <a href="/01_Installfest/11-deploy-to-heroku.html">Deploy to Heroku</a>.</p>
  
  
    <h4>Or:</h4>
    <p>Go back to <a href="/01_Installfest/09-generate-a-database-model.html">Generate a Database Model</a>.</p>
  



</div>
</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h3 class="footer-heading">ElixirBridge for Girls</h3>

    <div class="site-contact">

      <p><strong>Contact</strong></p>
      <ul class="social-media-list">
        <li>
          <a href="mailto:info@elixirbridge.org">
            <i class="fa fa-envelope-o"></i>
            <span class="username">info@elixirbridge.org</span>
          </a>
        </li>

        
          
          <li>
            <a href="https://twitter.com/elixirbridge" title="Twitter">
              <i class="fa fa-twitter"></i>
              <span class="username">elixirbridge</span>
            </a>
          </li>
          
        
          
          <li>
            <a href="https://github.com/elixir-bridge" title="GitHub">
              <i class="fa fa-github"></i>
              <span class="username">elixirbridge</span>
            </a>
          </li>
          
        

      </ul>
    </div>

    <div class="site-signature">
      <p class="rss-subscribe text"><strong>Subscribe <a href="/elixir-bridge.github.io/feed.xml">via RSS</a></strong></p>
      <p class="text">We empower people with technology through teaching and facilitating access, enlarging the community of people who give back and teach others.
</p>
    </div>

  </div>

</footer>

<!-- Scripts -->
<script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/lightbox2/2.7.1/js/lightbox.min.js"></script>
<script>

$(document).ready(function() {

  // Syntax highlighting
  hljs.initHighlightingOnLoad();

  const hamburgerMenu = document.getElementById("js-mobile-menu")
  const sidebar = document.getElementsByClassName("sidebar")[0]

  hamburgerMenu.addEventListener("click", () => {
    sidebar.classList.toggle("mobile-show")
  })
});

</script>




  </body>

</html>
